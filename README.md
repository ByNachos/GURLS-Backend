# GURLS Backend - –°–∏—Å—Ç–µ–º–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è URL —Å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

GURLS Backend ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–∏—Å –Ω–∞ —è–∑—ã–∫–µ Go, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π REST API –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è URL —Å —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–¥–ø–∏—Å–æ–∫, –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã YuKassa. –°–µ—Ä–≤–∏—Å –ø–æ—Å—Ç—Ä–æ–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ Clean Architecture –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π HTTP endpoint –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ URL**: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∞–ª–∏–∞—Å–∞–º–∏
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å refresh —Ç–æ–∫–µ–Ω–∞–º–∏
- **–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫**: –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **–ü–ª–∞—Ç–µ–∂–∏**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π YuKassa
- **PostgreSQL**: –ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- **Swagger API**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **Graceful Shutdown**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞
- **Structured Logging**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å –ø–æ–º–æ—â—å—é Zap

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Go 1.24+**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è Go —Å –Ω–æ–≤–µ–π—à–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
- **Gin Framework**: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á–∏—Å—Ç—ã–π net/http –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **PostgreSQL**: –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **GORM**: ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **JWT**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é golang-jwt/jwt
- **Zap**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Testcontainers**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- **Swagger**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
GURLS-Backend/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ backend/
‚îÇ       ‚îî‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ analytics/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ processor.go         # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers.go          # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.go               # JWT —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware.go        # Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ password.go          # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∞—Ä–æ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.go        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations.go        # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ click.go             # –ú–æ–¥–µ–ª—å –∫–ª–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ link.go              # –ú–æ–¥–µ–ª—å —Å—Å—ã–ª–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.go           # –ú–æ–¥–µ–ª—å –ø–ª–∞—Ç–µ–∂–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscription_type.go # –ú–æ–¥–µ–ª—å —Ç–∏–ø–∞ –ø–æ–¥–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.go              # –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ handler/http/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ health.go            # Health check endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ links.go             # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å—Å—ã–ª–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.go           # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redirect.go          # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ server.go            # HTTP —Å–µ—Ä–≤–µ—Ä –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ subscription.go      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ postgres/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ postgres.go      # PostgreSQL implementation
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ postgres_test.go # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.go           # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ service/
‚îÇ       ‚îú‚îÄ‚îÄ payment.go           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ       ‚îî‚îÄ‚îÄ url_shortener.go     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è URL
‚îú‚îÄ‚îÄ pkg/
‚îÇ   ‚îú‚îÄ‚îÄ logger/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.go            # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ random/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ random.go            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Å—Ç—Ä–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ useragent/
‚îÇ       ‚îî‚îÄ‚îÄ parser.go            # –ü–∞—Ä—Å–µ—Ä User-Agent
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ 001_create_subscription_types.sql
‚îÇ   ‚îú‚îÄ‚îÄ 002_create_users.sql
‚îÇ   ‚îú‚îÄ‚îÄ 003_create_links.sql
‚îÇ   ‚îú‚îÄ‚îÄ 004_create_clicks.sql
‚îÇ   ‚îú‚îÄ‚îÄ 005_create_user_stats.sql
‚îÇ   ‚îú‚îÄ‚îÄ 006_create_sessions.sql
‚îÇ   ‚îú‚îÄ‚îÄ 007_create_refresh_tokens.sql
‚îÇ   ‚îú‚îÄ‚îÄ 008_remove_telegram_integration.sql
‚îÇ   ‚îî‚îÄ‚îÄ 009_create_payments.sql
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ docs.go                  # Swagger –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ swagger.json             # Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (JSON)
‚îÇ   ‚îî‚îÄ‚îÄ swagger.yaml             # Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (YAML)
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îî‚îÄ‚îÄ regexes.yaml             # –ü—Ä–∞–≤–∏–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ User-Agent
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ local.yml                # –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ production.yml           # Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ deployments/
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile               # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ go.mod                       # Go modules
‚îú‚îÄ‚îÄ go.sum                       # Go dependencies
‚îî‚îÄ‚îÄ README.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Clean Architecture

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Å–ª–æ–µ–≤:

#### Domain Layer (`internal/domain/`)
–°–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞:
- **User**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- **Link**: –ö–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- **Click**: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- **Payment**: –ü–ª–∞—Ç–µ–∂–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **SubscriptionType**: –¢–∏–ø—ã –ø–æ–¥–ø–∏—Å–æ–∫ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏

#### Repository Layer (`internal/repository/`)
–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏:
- **Storage Interface**: –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏
- **PostgreSQL Implementation**: –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è PostgreSQL
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

#### Service Layer (`internal/service/`)
–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- **URLShortenerService**: –õ–æ–≥–∏–∫–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫
- **PaymentService**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π –∏ –ø–æ–¥–ø–∏—Å–æ–∫

#### Handler Layer (`internal/handler/http/`)
HTTP API –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:
- **RESTful API**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç REST –ø—Ä–∏–Ω—Ü–∏–ø–∞–º
- **Middleware**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, CORS, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Error Handling**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### PostgreSQL Schema
```sql
-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
subscription_types    # –¢–∏–ø—ã –ø–æ–¥–ø–∏—Å–æ–∫ –∏ –∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
users                # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
links                # –ö–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏
clicks               # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
payments             # –ü–ª–∞—Ç–µ–∂–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
user_stats           # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
sessions             # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏
refresh_tokens       # Refresh —Ç–æ–∫–µ–Ω—ã –¥–ª—è JWT
```

#### –ò–Ω–¥–µ–∫—Å—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –∞–ª–∏–∞—Å—ã —Å—Å—ã–ª–æ–∫
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –ß–∞—Å—Ç–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- Foreign key constraints –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Go 1.24+**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä Go
- **PostgreSQL 14+**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Git**: –î–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**:
```bash
git clone <repository-url>
cd GURLS-Backend
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
# Database
DATABASE_PASSWORD=your_db_password
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=gurls
DATABASE_USER=postgres

# JWT
JWT_SECRET=your-secret-key-here

# YuKassa (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
YOOKASSA_SHOP_ID=test
YOOKASSA_SECRET_KEY=test
YOOKASSA_TEST_MODE=true

# Application
ENV=development
```

3. **–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**:
```bash
createdb gurls
```

4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**:
```bash
go mod tidy
```

5. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤**:
```bash
curl -o assets/regexes.yaml https://raw.githubusercontent.com/ua-parser/uap-core/master/regexes.yaml
```

6. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**:
```bash
go run ./cmd/backend
```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080

### Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### Docker

1. **–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞**:
```bash
docker build -t gurls-backend -f deployments/Dockerfile .
```

2. **–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**:
```bash
docker run -p 8080:8080 \
  -e DATABASE_PASSWORD=prod_password \
  -e JWT_SECRET=prod_secret \
  gurls-backend
```

#### Docker Compose
```yaml
version: '3.8'
services:
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: gurls
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: ${DATABASE_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  backend:
    build:
      context: .
      dockerfile: deployments/Dockerfile
    environment:
      DATABASE_PASSWORD: ${DATABASE_PASSWORD}
      DATABASE_HOST: postgres
    ports:
      - "8080:8080"
    depends_on:
      - postgres

volumes:
  postgres_data:
```

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### `config/local.yml`
```yaml
env: development
url_shortener:
  alias_length: 4
  base_url: http://localhost:8080
database:
  host: localhost
  port: 5432
  user: postgres
  dbname: gurls
  sslmode: disable
  auto_migrate: true
  seed_data: true
payment:
  test_mode: true
```

#### `config/production.yml`
```yaml
env: production
url_shortener:
  alias_length: 6
  base_url: https://your-domain.com
database:
  host: prod-db-host
  port: 5432
  sslmode: require
  auto_migrate: false
  seed_data: false
payment:
  test_mode: false
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `ENV` | –û–∫—Ä—É–∂–µ–Ω–∏–µ (development/production) | `production` |
| `CONFIG_PATH` | –ü—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É —Ñ–∞–π–ª—É | `config/local.yml` |
| `DATABASE_PASSWORD` | –ü–∞—Ä–æ–ª—å PostgreSQL | **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |
| `DATABASE_HOST` | –•–æ—Å—Ç –ë–î | `localhost` |
| `DATABASE_PORT` | –ü–æ—Ä—Ç –ë–î | `5432` |
| `DATABASE_NAME` | –ò–º—è –ë–î | `gurls` |
| `DATABASE_USER` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î | `postgres` |
| `DATABASE_AUTO_MIGRATE` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ | `true` |
| `DATABASE_SEED_DATA` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö | `true` |
| `ALIAS_LENGTH` | –î–ª–∏–Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö –∞–ª–∏–∞—Å–æ–≤ | `4` |
| `BASE_URL` | –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è —Å—Å—ã–ª–æ–∫ | `http://localhost:8080` |
| `YOOKASSA_SHOP_ID` | ID –º–∞–≥–∞–∑–∏–Ω–∞ YuKassa | `test` |
| `YOOKASSA_SECRET_KEY` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á YuKassa | `test` |
| `YOOKASSA_TEST_MODE` | –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º YuKassa | `true` |

## üîå API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```http
POST /api/auth/register
POST /api/auth/login
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∞–º–∏

```http
POST /api/shorten           # –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏
GET  /api/links             # –°–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET  /api/stats/{alias}     # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Å—ã–ª–∫–µ
DELETE /api/links/{alias}   # –£–¥–∞–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏
```

### –†–µ–¥–∏—Ä–µ–∫—Ç—ã

```http
GET /{alias}                # –†–µ–¥–∏—Ä–µ–∫—Ç –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ
```

### –ü–ª–∞—Ç–µ–∂–∏

```http
POST /api/payments/create       # –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
GET  /api/payments/status/{id}  # –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
POST /api/payments/webhook      # Webhook –æ—Ç YuKassa
GET  /api/payments              # –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
```

### –ü–æ–¥–ø–∏—Å–∫–∏

```http
GET /api/subscriptions/plans     # –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–ª–∞–Ω—ã
GET /api/subscriptions/current   # –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
POST /api/subscriptions/upgrade  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ

```http
GET /health                 # Health check
GET /ready                  # Readiness probe
GET /metrics                # –ú–µ—Ç—Ä–∏–∫–∏ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
GET /api/v1/                # Swagger UI
```

### Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080/api/v1/

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# Unit —Ç–µ—Å—Ç—ã
go test -v ./...

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç Docker)
go test -v -tags=integration ./internal/repository/postgres/

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
go test -v -race -coverprofile=coverage.out ./...
go tool cover -html=coverage.out
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–ò—Å–ø–æ–ª—å–∑—É–µ–º **Testcontainers** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–π PostgreSQL –≤ —Ç–µ—Å—Ç–∞—Ö:

```go
func TestPostgresStorage_SaveAndGetLink(t *testing.T) {
    storage, cleanup := setupTestDB(t)
    defer cleanup()
    
    // –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥ —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
}
```

### E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç `test-api.sh` –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ E2E —Ç–µ—Å—Ç–∞
./test-api.sh
```

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏
- –†–µ–¥–∏—Ä–µ–∫—Ç
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **JWT Authentication**: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å access/refresh —Ç–æ–∫–µ–Ω–∞–º–∏
- **Password Hashing**: bcrypt –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- **SQL Injection Protection**: –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ GORM
- **CORS Support**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ CORS –ø—Ä–∞–≤–∏–ª–∞
- **Input Validation**: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **Rate Limiting**: –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `go get -u ./...`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ production
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ TLS –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ JWT —Å–µ–∫—Ä–µ—Ç—ã
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Zap** –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

```go
log.Info("created link", 
    zap.String("alias", alias), 
    zap.Int64("user_id", userID))
```

### Health Checks

#### `/health` endpoint
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞:
```json
{
  "status": "healthy",
  "timestamp": "2025-07-12T12:00:00Z",
  "uptime": "1h30m45s"
}
```

#### `/ready` endpoint
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:
```json
{
  "status": "ready",
  "database": "connected",
  "migrations": "applied"
}
```

### –ú–µ—Ç—Ä–∏–∫–∏ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å Prometheus –º–µ—Ç—Ä–∏–∫–∏:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—à–∏–±–∫–∏ –ø–æ —Ç–∏–ø–∞–º

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### YuKassa –ø–ª–∞—Ç–µ–∂–∏

#### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
```go
payment := &domain.Payment{
    Amount:      amount,
    Currency:    "RUB",
    Description: "Test payment",
}
```

#### Production —Ä–µ–∂–∏–º
–¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- YOOKASSA_SHOP_ID
- YOOKASSA_SECRET_KEY  
- YOOKASSA_TEST_MODE=false

### PostgreSQL

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å retry –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –∏ connection pooling.

#### –ú–∏–≥—Ä–∞—Ü–∏–∏
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `DATABASE_AUTO_MIGRATE`).

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **Latency**: < 50ms –¥–ª—è 95% –∑–∞–ø—Ä–æ—Å–æ–≤
- **Throughput**: > 1000 RPS –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- **Memory Usage**: ~50MB base memory
- **Database**: Connection pooling —Å 100 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏

### –ü–ª–∞–Ω—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **Redis Caching**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- **Connection Pooling**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **Background Jobs**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **Database Indexes**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–π

–í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `migrations/` –∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **001_create_subscription_types.sql**: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø–æ–¥–ø–∏—Å–æ–∫
2. **002_create_users.sql**: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **003_create_links.sql**: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫
4. **004_create_clicks.sql**: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∫–ª–∏–∫–æ–≤
5. **005_create_user_stats.sql**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
6. **006_create_sessions.sql**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏
7. **007_create_refresh_tokens.sql**: Refresh —Ç–æ–∫–µ–Ω—ã
8. **008_remove_telegram_integration.sql**: –£–¥–∞–ª–µ–Ω–∏–µ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
9. **009_create_payments.sql**: –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
psql -U postgres -d gurls -f migrations/migrate.sql

# –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
psql -U postgres -d gurls -f migrations/rollback.sql
```

## ü§ù Contributing

### –°—Ç–∏–ª—å –∫–æ–¥–∞

- **gofmt**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **golint**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
- **go vet**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- **Naming**: camelCase –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, PascalCase –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–Ω–∏–µ feature branch
3. –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
5. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
6. Code review
7. Merge –≤ main

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

1. **Domain Models**: –î–æ–±–∞–≤—å—Ç–µ –º–æ–¥–µ–ª–∏ –≤ `internal/domain/`
2. **Repository Methods**: –†–∞—Å—à–∏—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ `internal/repository/`
3. **Service Logic**: –î–æ–±–∞–≤—å—Ç–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤ `internal/service/`
4. **HTTP Handlers**: –°–æ–∑–¥–∞–π—Ç–µ endpoints –≤ `internal/handler/http/`
5. **Tests**: –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å–ª–æ–µ–≤
6. **Documentation**: –û–±–Ω–æ–≤–∏—Ç–µ Swagger –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Swagger API**: http://localhost:8080/api/v1/
- **Database Schema**: –°–º. —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π
- **Architecture Decision Records**: –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –ë–î
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PostgreSQL
pg_isready -h localhost -p 5432

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
psql -U postgres -d gurls -c "SELECT 1;"
```

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
psql -U postgres -d gurls -c "\dt"

# –†—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
psql -U postgres -d gurls -f migrations/001_create_subscription_types.sql
```

#### –û—Ç–ª–∞–¥–∫–∞ –ª–æ–≥–æ–≤
```bash
# –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
tail -f logs/app.log | jq

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é
tail -f logs/app.log | jq 'select(.level == "error")'
```

### –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **Issues**: GitHub Issues –¥–ª—è –±–∞–≥–æ–≤
- **Discussions**: GitHub Discussions –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤
- **Email**: support@gurls.ru

---

*–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –∂–∏–≤—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Ä–∞–∑–≤–∏—Ç–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞.*

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ò—é–ª—å 2025*